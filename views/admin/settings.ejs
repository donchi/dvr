<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Settings - Digital Visitor Registry (DVR)</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="../css/admin.css">
  <link rel="shortcut icon" href="../images/favicon.png" type="image/png">
  </head>
<body>
    <!-- Header -->
  <%- include ('includes/header') %>

  <!-- Side Navigation -->
  <%- include ('includes/sidenav') %>

  <!-- Main Content -->
  <main class="main-content">
    <div class="page-header">
      <h2>Settings</h2>
      <div class="page-actions">
        <button class="btn primary" id="addAdminBtn"><i class="fas fa-user-plus"></i> Add Admin</button>
      </div>
    </div>

    <div class="settings-tabs">
      <div class="tab active" data-tab="users">Admin Users</div>
      <div class="tab" data-tab="permissions">Permissions</div>
      <div class="tab" data-tab="system">System Settings</div>
    </div>

    <div class="settings-content active" id="users-tab">
      <div class="search-filter-container">
        <div class="search-box">
          <i class="fas fa-search"></i>
          <input type="text" placeholder="Search admin users...">
        </div>
        
        <div class="filter-group">
          <select>
            <option>All Roles</option>
            <option>Super Admin</option>
            <option>Security Admin</option>
            <option>Reception Admin</option>
          </select>
          
          <select>
            <option>All Status</option>
            <option>Active</option>
            <option>Inactive</option>
          </select>
          
          <button class="btn"><i class="fas fa-filter"></i> Filter</button>
        </div>
      </div>
      
      <div class="table-container">
        <table class="admin-table">
          <thead>
            <tr>
              <th>User</th>
              <th>Email</th>
              <th>Role</th>
              <th>Last Active</th>
              <th>Status</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>
                <div class="user-cell">
                  <div class="user-avatar small">
                    <img src="https://randomuser.me/api/portraits/men/32.jpg" alt="Col. James Smith">
                  </div>
                  <div class="user-info">
                    <span>Col. James Smith</span>
                    <small>Created: 15/10/2023</small>
                  </div>
                </div>
              </td>
              <td>james.smith@dhq.mil</td>
              <td><span class="role-badge super-admin">Super Admin</span></td>
              <td>Today, 08:45 AM</td>
              <td><span class="status-badge active">Active</span></td>
              <td>
                <div class="dropdown">
                  <button class="dropdown-btn"><i class="fas fa-ellipsis-v"></i></button>
                  <div class="dropdown-content">
                    <a href="#"><i class="fas fa-edit"></i> Edit User</a>
                    <a href="#"><i class="fas fa-key"></i> Reset Password</a>
                    <a href="#"><i class="fas fa-user-slash"></i> Deactivate</a>
                    <a href="#" class="danger"><i class="fas fa-trash"></i> Delete</a>
                  </div>
                </div>
              </td>
            </tr>
            <tr>
              <td>
                <div class="user-cell">
                  <div class="user-avatar small">
                    <img src="https://randomuser.me/api/portraits/women/44.jpg" alt="Lt. Sarah Johnson">
                  </div>
                  <div class="user-info">
                    <span>Lt. Sarah Johnson</span>
                    <small>Created: 10/10/2023</small>
                  </div>
                </div>
              </td>
              <td>sarah.johnson@dhq.mil</td>
              <td><span class="role-badge security-admin">Security Admin</span></td>
              <td>Yesterday, 04:30 PM</td>
              <td><span class="status-badge active">Active</span></td>
              <td>
                <div class="dropdown">
                  <button class="dropdown-btn"><i class="fas fa-ellipsis-v"></i></button>
                  <div class="dropdown-content">
                    <a href="#"><i class="fas fa-edit"></i> Edit User</a>
                    <a href="#"><i class="fas fa-key"></i> Reset Password</a>
                    <a href="#"><i class="fas fa-user-slash"></i> Deactivate</a>
                    <a href="#" class="danger"><i class="fas fa-trash"></i> Delete</a>
                  </div>
                </div>
              </td>
            </tr>
            <tr>
              <td>
                <div class="user-cell">
                  <div class="user-avatar small">
                    <img src="https://randomuser.me/api/portraits/men/75.jpg" alt="Sgt. Michael Adekunle">
                  </div>
                  <div class="user-info">
                    <span>Sgt. Michael Adekunle</span>
                    <small>Created: 05/10/2023</small>
                  </div>
                </div>
              </td>
              <td>michael.adekunle@dhq.mil</td>
              <td><span class="role-badge reception-admin">Reception Admin</span></td>
              <td>2 days ago</td>
              <td><span class="status-badge inactive">Inactive</span></td>
              <td>
                <div class="dropdown">
                  <button class="dropdown-btn"><i class="fas fa-ellipsis-v"></i></button>
                  <div class="dropdown-content">
                    <a href="#"><i class="fas fa-edit"></i> Edit User</a>
                    <a href="#"><i class="fas fa-key"></i> Reset Password</a>
                    <a href="#"><i class="fas fa-user-check"></i> Activate</a>
                    <a href="#" class="danger"><i class="fas fa-trash"></i> Delete</a>
                  </div>
                </div>
              </td>
            </tr>
          </tbody>
        </table>
        
        <!-- Pagination Controls -->
        <div class="pagination">
          <div class="pagination-info">Showing 1-3 of 12 admin users</div>
          <div class="pagination-controls">
            <button class="pagination-btn" disabled>
              <i class="fas fa-chevron-left"></i>
            </button>
            <button class="pagination-btn active">1</button>
            <button class="pagination-btn">2</button>
            <button class="pagination-btn">3</button>
            <button class="pagination-btn">4</button>
            <button class="pagination-btn">
              <i class="fas fa-chevron-right"></i>
            </button>
          </div>
          <div class="pagination-page-size">
            <span>Rows per page:</span>
            <select>
              <option>5</option>
              <option selected>10</option>
              <option>25</option>
              <option>50</option>
            </select>
          </div>
        </div>
      </div>
    </div>

    <!-- Add Admin Modal (hidden by default) -->
    <div class="modal" id="addAdminModal">
      <div class="modal-content">
        <div class="modal-header">
          <h3>Add New Admin User</h3>
          <button class="close-btn">&times;</button>
        </div>
        <div class="modal-body">
          <form id="addAdminForm">
            <div class="form-group">
              <label>Full Name</label>
              <input type="text" placeholder="Enter full name" required>
            </div>
            <div class="form-group">
              <label>Email Address</label>
              <input type="email" placeholder="Enter email address" required>
            </div>
            <div class="form-group">
              <label>Role</label>
              <select required>
                <option value="">Select role</option>
                <option value="super-admin">Super Admin</option>
                <option value="security-admin">Security Admin</option>
                <option value="reception-admin">Reception Admin</option>
              </select>
            </div>
            <div class="form-group">
              <label>Temporary Password</label>
              <div class="password-input">
                <input type="password" value="Dhq@Secure2023" id="tempPassword" readonly>
                <button type="button" class="btn" id="copyPassword">
                  <i class="fas fa-copy"></i>
                </button>
                <button type="button" class="btn" id="generatePassword">
                  <i class="fas fa-sync-alt"></i>
                </button>
              </div>
              <small class="hint">User will be required to change this on first login</small>
            </div>
            <div class="form-actions">
              <button type="button" class="btn" id="cancelAddAdmin">Cancel</button>
              <button type="submit" class="btn primary">Create Admin User</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </main>

    <script>
    // Tab functionality
    const tabs = document.querySelectorAll('.tab');
    tabs.forEach(tab => {
      tab.addEventListener('click', () => {
        tabs.forEach(t => t.classList.remove('active'));
        tab.classList.add('active');
        // Hide all content tabs
        document.querySelectorAll('.settings-content').forEach(content => {
          content.classList.remove('active');
        });
        // Show selected tab
        document.getElementById(`${tab.dataset.tab}-tab`).classList.add('active');
      });
    });

    // Modal functionality
    const addAdminBtn = document.getElementById('addAdminBtn');
    const addAdminModal = document.getElementById('addAdminModal');
    const closeBtn = document.querySelector('.close-btn');
    const cancelBtn = document.getElementById('cancelAddAdmin');
    const copyBtn = document.getElementById('copyPassword');
    const generateBtn = document.getElementById('generatePassword');

    addAdminBtn.addEventListener('click', () => {
      addAdminModal.style.display = 'block';
    });

    closeBtn.addEventListener('click', () => {
      addAdminModal.style.display = 'none';
    });

    cancelBtn.addEventListener('click', () => {
      addAdminModal.style.display = 'none';
    });

    window.addEventListener('click', (e) => {
      if (e.target === addAdminModal) {
        addAdminModal.style.display = 'none';
      }
    });

    copyBtn.addEventListener('click', () => {
      const passwordInput = document.getElementById('tempPassword');
      passwordInput.select();
      document.execCommand('copy');
      // Show copied notification
      const originalText = copyBtn.innerHTML;
      copyBtn.innerHTML = '<i class="fas fa-check"></i> Copied!';
      setTimeout(() => {
        copyBtn.innerHTML = originalText;
      }, 2000);
    });

    generateBtn.addEventListener('click', () => {
      const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*';
      let password = '';
      for (let i = 0; i < 12; i++) {
        password += chars.charAt(Math.floor(Math.random() * chars.length));
      }
      document.getElementById('tempPassword').value = password;
    });
  </script>
</body>
</html>